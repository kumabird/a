<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>iPadé¢¨OS</title>
<input id="username-input" placeholder="ãƒ¦ãƒ¼ã‚¶ãƒ¼å">
<input id="password-input" type="password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰">
<button onclick="login()">ãƒ­ã‚°ã‚¤ãƒ³</button>
<style>
    #weather-detail {
    display: flex;
    flex-direction: column;
    height: 100%;
}

#weather-detail-content {
    flex: 1;
    overflow: hidden;
}

.detail-layout {
    display: flex;
    height: 100%;
    min-height: 0;   /* â† è¶…é‡è¦ */
}

.detail-weather {
    flex: 1;
    overflow-y: auto;
    min-height: 0;   /* â† è¶…é‡è¦ */
    padding-right: 15px;
}

.detail-news {
    flex: 1;
    overflow-y: auto;
    border-left: 1px solid #ddd;
    padding-left: 15px;
    min-height: 0;   /* â† è¶…é‡è¦ */
}

    .news-card {
    margin-bottom: 14px;
}
    /* ===== å¤©æ°—è©³ç´°UI ===== */
.weather-header {
    text-align: center;
    padding: 20px;
    background: linear-gradient(180deg,#4facfe,#00f2fe);
    color: white;
}

.weather-temp {
    font-size: 48px;
    font-weight: bold;
}

.weather-desc {
    font-size: 18px;
    opacity: 0.9;
}

.weather-card {
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    padding: 15px;
    margin: 15px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

.forecast-row {
    display: flex;
    overflow-x: auto;
    gap: 10px;
}

.forecast-item {
    min-width: 90px;
    text-align: center;
    background: rgba(255,255,255,0.9);
    border-radius: 12px;
    padding: 10px;
}

.news-card {
    background: white;
    border-radius: 14px;
    padding: 12px;
    margin-bottom: 10px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
}

.news-card a {
    text-decoration: none;
    color: #111;
    font-weight: 600;
}

    /* ===== å¤©æ°—ãƒãƒ¼ ===== */
#weather-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40px;
    background: rgba(0,0,0,0.6);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    backdrop-filter: blur(10px);
    z-index: 9999;
    cursor: pointer;
    padding: 0 12px;
    gap: 12px;
}

#weather-bar .news-title {
    max-width: 60%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-align: left;
}

/* ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ä¸­ã¯éè¡¨ç¤ºã«ã™ã‚‹ */
:fullscreen #weather-bar,
:-webkit-full-screen #weather-bar {
    display: none;
}

/* ===== æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆçœç•¥ã›ãšãã®ã¾ã¾ä¿æŒï¼‰ ===== */
    .secret-app.daydream {
    background: black;
    color: #d8b4ff;
    box-shadow: 0 0 15px #c084fc;
}
.secret-app.daydream:hover {
    box-shadow: 0 0 25px #e9d5ff;
}

    .stars {
    position: absolute;
    inset: 0;
    background-image:
        radial-gradient(1.5px 1.5px at 70% 20%, white, transparent),
        radial-gradient(1px 1px at 80% 35%, white, transparent),
        radial-gradient(1px 1px at 65% 50%, white, transparent);
    opacity: 0.6;
    animation: twinkle 4s infinite alternate;
}

@keyframes twinkle {
    from { opacity: 0.4; }
    to { opacity: 0.8; }
}
    #secret-homescreen {
    opacity: 0;
    transition: opacity 0.5s ease;
    display: block; /* â† ã“ã“ãŒé‡è¦ */
}
    
    #wakame-app,
#utopia-app {
    display: none;
    opacity: 0;
    transition: opacity 0.2s ease;
}

    #lockscreen,
#homescreen,
#settings-app,
#secret-homescreen,
#wakame-app,
#utopia-app {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

/* è¡¨ç¤ºé †ã‚’å›ºå®šï¼ˆãƒãƒ©ã¤ãé˜²æ­¢ï¼‰ */
#lockscreen { z-index: 10; }
#homescreen { z-index: 20; }
#settings-app { z-index: 30; }
#secret-homescreen { z-index: 40; }
#wakame-app { z-index: 50; }
#utopia-app { z-index: 60; }

    .secret-app-screen {
    background-image: url("blob:chrome-untrusted://media-app/200dae8e-f83c-4bed-9419-53e7a7c85df6");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

    .secret-app {
    width: 120px;
    height: 120px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    font-weight: bold;
    margin: 20px;
    cursor: pointer;
    transition: 0.2s;
}

/* Wakameï¼šé»’ Ã— ãƒã‚ªãƒ³ã‚°ãƒªãƒ¼ãƒ³ */
.secret-app.wakame {
    background: black;
    color: #00ff88;
    box-shadow: 0 0 15px #00ff88;
}
.secret-app.wakame:hover {
    box-shadow: 0 0 25px #00ff88;
}

/* Utopiaï¼šé»’ Ã— ãƒã‚ªãƒ³æ¿ƒã„ç©ºè‰² */
.secret-app.utopia {
    background: black;
    color: #00c8ff;
    box-shadow: 0 0 15px #00c8ff;
}
.secret-app.utopia:hover {
    box-shadow: 0 0 25px #00c8ff;
}
    .secret-title {
    font-size: 32px;
    font-weight: bold;
    text-align: center;
    margin-top: 40px;
    text-shadow: 0 0 10px black;
}

.secret-app-grid {
    display: flex;
    justify-content: center;
    margin-top: 40px;
}

/* ===== å…¨ä½“ ===== */
body {
    margin: 0;
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
}

/* ===== ãƒ­ãƒƒã‚¯ç”»é¢ ===== */
#lockscreen {
    position: absolute;
    inset: 0;
    background: url("https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg");
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-top: 120px;
    color: white;
    text-shadow: 0 0 12px rgba(0,0,0,0.6);
    z-index: 1000;
}

#lock-date {
    font-size: 35px;
    font-weight: 600;
    margin-bottom: 10px;
}

#lock-time {
    font-size: 88px;
    font-weight: 700;
    line-height: 1;
}

/* ===== ãƒ›ãƒ¼ãƒ ç”»é¢ ===== */
#homescreen {
    position: absolute;
    inset: 0;
    background: url("https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg");
    background-size: cover;
    background-position: center;
    display: none;
    z-index: 900;
}

/* ===== ã‚¢ã‚¤ã‚³ãƒ³ã‚°ãƒªãƒƒãƒ‰ ===== */
.app-grid {
    position: absolute;
    top: 80px;
    left: 60px;
    display: grid;
    grid-template-columns: repeat(6, 80px);
    grid-auto-rows: 100px;
    gap: 28px;
}

/* ===== ã‚¢ã‚¤ã‚³ãƒ³ ===== */
.app-icon {
    width: 80px;
    height: 80px;
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 26px;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 18px rgba(0,0,0,0.35);
    backdrop-filter: blur(10px);
}

.app-label {
    margin-top: 4px;
    text-align: center;
    font-size: 12px;
    color: white;
    text-shadow: 0 0 6px rgba(0,0,0,0.8);
}

/* ===== ã‚¢ã‚¤ã‚³ãƒ³è‰² ===== */
.icon-youtube { background: #ff0000; }
.icon-334 { background: #007aff; }
.icon-2048 { background: #edc22e; font-size: 24px; font-weight: 700; }

.icon-tver {
    background: #ffffff;
    font-size: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.tver-tv { color: #00b7ff; font-weight: 1000; }
.tver-er { color: #555555; font-weight: 600; }

.icon-settings {
    background: #8e8e93;
    font-size: 32px;
}

/* ===== ã‚¢ãƒ—ãƒªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ ===== */
.app-window {
    position: absolute;
    inset: 0;
    background: white;
    display: none;
    z-index: 950;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 30px rgba(0,0,0,0.4);
}

.app-titlebar {
    height: 40px;
    background: #f2f2f7;
    display: flex;
    align-items: center;
    padding: 0 12px;
    border-bottom: 1px solid #ccc;
}

.close-btn {
    width: 18px;
    height: 18px;
    background: #ff5f57;
    border-radius: 50%;
    cursor: pointer;
    margin-right: 10px;
}

.app-title {
    font-size: 14px;
    font-weight: 600;
}

/* ===== è¨­å®šã‚¢ãƒ—ãƒª ===== */
.settings-container {
    display: flex;
    height: 100%;
}

.settings-menu {
    width: 200px;
    background: #f2f2f7;
    border-right: 1px solid #ddd;
    padding-top: 10px;
}

.settings-item {
    padding: 12px 16px;
    font-size: 14px;
    cursor: pointer;
    border-radius: 6px;
    margin: 4px 8px;
}

.settings-item:hover {
    background: #e5e5ea;
}

.settings-content {
    flex: 1;
    background: #ffffff;
    padding: 20px;
    overflow-y: auto;
}

.settings-placeholder {
    color: #888;
    font-size: 14px;
}

/* ===== å£ç´™ã‚µãƒ ãƒã‚¤ãƒ« ===== */
.wallpaper-section-title {
    font-size: 18px;
    font-weight: 600;
    margin: 10px 0;
}

.wallpaper-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 16px;
}

.wallpaper-thumb {
    width: 100%;
    height: 90px;
    border-radius: 12px;
    background-size: cover;
    background-position: center;
    cursor: pointer;
    border: 3px solid transparent;
    transition: 0.2s;
}

.wallpaper-thumb.selected {
    border: 3px solid #007aff;
}
    /* è£ãƒ›ãƒ¼ãƒ ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã¯ã‚¯ãƒªãƒƒã‚¯é€éã—ã¦èƒŒæ™¯ã ã‘æ‹…å½“ã•ã›ã‚‹ */
.secret-home::before {
  pointer-events: none;
  z-index: 0;
}

/* è£ãƒ›ãƒ¼ãƒ å†…ã®UIã‚’ç¢ºå®Ÿã«å‰é¢ã«å‡ºã™ */
#secret-homescreen, 
#secret-homescreen .secret-title,
#secret-homescreen .secret-app-grid,
#secret-homescreen .secret-app {
  position: relative;
  z-index: 2;
}

/* ã‚¿ã‚¤ãƒˆãƒ«ã®è‰²ã‚’æœˆå…‰ã£ã½ãèª¿æ•´ï¼ˆå¿…è¦ã«å¿œã˜ã¦è‰²ã‚’å¤‰ãˆã¦ï¼‰ */
#secret-homescreen .secret-title {
  color: #e8e6ff;
}
    html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: black; /* å¿µã®ãŸã‚ç™½ã‚’æ¶ˆã™ä¿é™º */
}
/* è£ãƒ›ãƒ¼ãƒ ï¼šãƒ­ãƒ¼ã‚«ãƒ«ç”»åƒå„ªå…ˆã§ä¸€ç®‡æ‰€ã«ã¾ã¨ã‚ã‚‹ */
#secret-homescreen.secret-home {
    position: fixed;
    inset: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;

    /* ãƒ­ãƒ¼ã‚«ãƒ«ç”»åƒã‚’ä½¿ã†ï¼ˆip.html ã¨åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã« moon.jpg ã‚’ç½®ãï¼‰ */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

/* ç”»åƒã®ä¸Šã«è–„ç´«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆä»»æ„ã€é›°å›²æ°—ç”¨ï¼‰ */
#secret-homescreen.secret-home::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(70, 10, 120, 0.22);
    pointer-events: none;
    mix-blend-mode: multiply;
}

/* ç”»åƒã®ä¸Šã«è–„ã„ç´«ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã‚’ã®ã›ã¦ä¸–ç•Œè¦³ã‚’çµ±ä¸€ï¼ˆä»»æ„ï¼‰ */
.secret-home::before {
    content: "";
    position: absolute;
    inset: 0;
    background: rgba(70, 10, 120, 0.22);
    pointer-events: none;
    mix-blend-mode: multiply;
}

/* weather detail content small tweaks */
#weather-detail .app-titlebar .app-title {
    margin-left: 0;
}
#weather-detail-content h2 { margin: 8px 0 6px; }
#weather-detail-content p { margin: 4px 0; }
#weather-detail .app-window { background: white; }
</style>
</head>

<body>
<!-- ========================= -->
<!-- ãƒ­ãƒƒã‚¯ç”»é¢ -->
<!-- ========================= -->
<div id="lockscreen">
    <div id="lock-date"></div>
    <div id="lock-time"></div>
</div>

<!-- ========================= -->
<!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
<!-- ========================= -->
<div id="homescreen">
    <div class="app-grid">

        <!-- YouTube ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆæ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãï¼‰ -->
        <div class="app-item" onclick="openYouTubeTab()">
            <div class="app-icon icon-youtube">â–¶</div>
            <div class="app-label">youtube</div>
        </div>
        
        <div onclick="openApp('app-334')">
            <div class="app-icon icon-334">ğŸŒ</div>
            <div class="app-label">33-4</div>
        </div>

        <div onclick="openApp('app-2048')">
            <div class="app-icon icon-2048">2048</div>
            <div class="app-label">2048</div>
        </div>

        <div onclick="openApp('app-tver')">
            <div class="app-icon icon-tver">
                <span class="tver-tv">tv</span><span class="tver-er">er</span>
            </div>
            <div class="app-label">TVer</div>
        </div>

        <div onclick="openApp('app-settings')">
            <div class="app-icon icon-settings">âš™ï¸</div>
            <div class="app-label">è¨­å®š</div>
        </div>

    </div>
</div>

<script>
    async function sha256(text){
    const encoder = new TextEncoder();
    const data = encoder.encode(text);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2,"0")).join("");
}
    let USERS = {};

async function loadUsers(){
    try{
        const res = await fetch("users.json");
        USERS = await res.json();
        console.log("ãƒ¦ãƒ¼ã‚¶ãƒ¼èª­ã¿è¾¼ã¿å®Œäº†");
    }catch(e){
        console.error("users.json èª­ã¿è¾¼ã¿å¤±æ•—", e);
    }
}
    

            function openDayDream() {
    incrementSecretCount();
    window.open("https://ddx.v2.nana.wilkszyn.dk/", "_blank");
}

            function hideAllScreens() {
    const ids = [
        "lockscreen",
        "homescreen",
        "settings-app",
        "secret-homescreen",
        "wakame-app",
        "utopia-app",
        "weather-detail",
        "app-2048",
        "app-334",
        "app-tver",
        "app-settings",
        "youtube"
    ];

    ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) {
            el.style.display = "none";
            el.style.opacity = 0;
        }
    });
}

    function setCookie(name, value, days=365){
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    const expires = "expires=" + d.toUTCString();
    document.cookie = name + "=" + encodeURIComponent(value) + ";" + expires + ";path=/";
}

function getCookie(name){
    const cname = name + "=";
    const decodedCookie = decodeURIComponent(document.cookie);
    const ca = decodedCookie.split(';');
    for(let c of ca){
        c = c.trim();
        if(c.indexOf(cname) === 0){
            return c.substring(cname.length);
        }
    }
    return null;
}

    function setWallpaper(url){

    // èƒŒæ™¯å¤‰æ›´
    document.body.style.backgroundImage = `url('${url}')`;
    document.body.style.backgroundSize = "cover";
    document.body.style.backgroundPosition = "center";

    // Cookieã«ä¿å­˜
    setCookie("wallpaper", url, 365);

}

function openYouTubeTab() {
    window.open("https://sitepro-d3up.onrender.com/", "_blank");
}
            function unlockSecretMode() {

    hideAllScreens();

    incrementSecretCount();

    const secret = document.getElementById("secret-homescreen");
    secret.style.display = "block";

    requestAnimationFrame(() => {
        secret.style.opacity = "1";
    });
}


    function closeSettingsApp() {
    const ids = [
        "settings-app",
        "settings",
        "settings-container",
        "settingsApp",
        "settingsMenu",
        "settings-screen",
        "settingsUI"
    ];

    ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = "none";
    });
}
function closeSettings() {
    const settings = document.getElementById("app-settings");
    if (settings) settings.style.display = "none";

    // ãƒ›ãƒ¼ãƒ ç”»é¢ã‚’è¡¨ç¤º
    const home = document.getElementById("homescreen");
    if (home) home.style.display = "block";
}
</script>

<script>
    function login(){

    const username = document.getElementById("username-input").value.trim();
    const password = document.getElementById("password-input").value;

    if(!USERS[username]){
        alert("ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå­˜åœ¨ã—ã¾ã›ã‚“");
        return;
    }

    if(password === USERS[username]){

        openApp("secret-app");

    }else{

        alert("ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™");

    }
}

/* ============================\
   å¤©æ°— + ãƒ‹ãƒ¥ãƒ¼ã‚¹ (å¥ˆè‰¯)
   - latestWeatherData
   - latestNewsData
============================ */

let latestWeatherData = null;
let latestNewsData = null;
    const NEWS_SOURCES = {
    nhk: {
        name: "NHK",
        url: "https://www3.nhk.or.jp/rss/news/cat0.xml"
    },
    yahoo: {
        name: "Yahoo",
        url: "https://news.yahoo.co.jp/rss/topics/top-picks.xml"
    },
    it: {
        name: "ITmedia",
        url: "https://rss.itmedia.co.jp/rss/2.0/news_bursts.xml"
    }
};


/* å¤©æ°—å–å¾—ï¼ˆå¥ˆè‰¯ï¼‰ */
async function loadWeather() {
    try {
        const lat = 34.6851;
        const lon = 135.8048;

        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 5000);

        const res = await fetch(
            `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=temperature_2m_max,temperature_2m_min,precipitation_probability_max&timezone=Asia/Tokyo`,
            { signal: controller.signal }
        );

        clearTimeout(timeout);

        if (!res.ok) throw new Error("weather fetch failed");

        latestWeatherData = await res.json();

    } catch (e) {
        console.warn("å¤©æ°—å–å¾—å¤±æ•—", e);
        latestWeatherData = null;
    }

    updateInfoBar();
}

/* ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ï¼ˆNHK RSS via rss2jsonï¼‰ */
async function loadNewsHeadline() {
    try {
        const selected = localStorage.getItem("news-source") || "nhk";

        let rssUrl;

        if (selected === "yahoo") {
            rssUrl = "https://news.yahoo.co.jp/rss/topics/top-picks.xml";
        } else {
            rssUrl = "https://news.google.com/rss?hl=ja&gl=JP&ceid=JP:ja";
        }

        const proxy = "https://api.allorigins.win/raw?url=";
        const response = await fetch(proxy + encodeURIComponent(rssUrl));

        if (!response.ok) throw new Error("Fetch failed");

        const text = await response.text();

        const parser = new DOMParser();
        const xml = parser.parseFromString(text, "text/xml");
        const items = xml.querySelectorAll("item");

        latestNewsData = {
            items: Array.from(items).slice(0, 5).map(item => ({
                title: item.querySelector("title")?.textContent || "",
                link: item.querySelector("link")?.textContent || "#"
            }))
        };

    } catch (error) {
        console.error("ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ã‚¨ãƒ©ãƒ¼:", error);

        latestNewsData = {
            items: [
                { title: "ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’å–å¾—ã§ãã¾ã›ã‚“", link: "#" }
            ]
        };
    }

    updateInfoBar();
}
/* å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³å¤‰æ› */
function getWeatherIcon(code) {
    if (code === 0) return "â˜€";
    if (code <= 3) return "â›…";
    if (code <= 48) return "â˜";
    if (code <= 67) return "ğŸŒ§";
    if (code <= 77) return "ğŸŒ¨";
    if (code <= 99) return "â›ˆ";
    return "ğŸŒ";
}
    function updateInfoBar() {
    const bar = document.getElementById("weather-bar");
    if (!bar) return;

    let weatherText = "å¥ˆè‰¯ å¤©æ°—å–å¾—ä¸­...";
    let newsText = "ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ä¸­...";

    // å¤©æ°—
    if (latestWeatherData && latestWeatherData.current_weather) {
        const current = latestWeatherData.current_weather;
        weatherText = `å¥ˆè‰¯ ${getWeatherIcon(current.weathercode)} ${current.temperature}Â°C`;
    }

    // ãƒ‹ãƒ¥ãƒ¼ã‚¹
    if (latestNewsData && latestNewsData.items && latestNewsData.items.length > 0) {
        newsText = latestNewsData.items[0].title;
    }

    bar.innerHTML = `
        <span>${weatherText}</span>
        <span style="opacity:0.6;">ï½œ</span>
        <span class="news-title">${newsText}</span>
    `;
}

function showDetail(type) {
    // ã“ã“ã§ã¯ weather-detail ã®ä¸­èº«ã‚’ä½¿ã†ä»•æ§˜ã«åˆã‚ã›ã‚‹
    const detail = document.getElementById("weather-detail");
    const content = document.getElementById("weather-detail-content");

    if (!content) return;

    if (type === "weather") {

        if (!latestWeatherData || !latestWeatherData.current_weather) {
            content.innerHTML = "<h2>å¤©æ°—æƒ…å ±</h2><p>ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p>";
            detail.style.display = "block";
            return;
        }

        const current = latestWeatherData.current_weather;

        content.innerHTML = `
            <h2>å¥ˆè‰¯ã®å¤©æ°—</h2>
            <p>æ°—æ¸©: ${current.temperature}Â°C</p>
            <p>é¢¨é€Ÿ: ${current.windspeed} km/h</p>
            <p>å¤©æ°—: ${getWeatherIcon(current.weathercode)}</p>
        `;
        detail.style.display = "block";
        return;

    } else if (type === "news") {

        if (!latestNewsData || !latestNewsData.items?.length) {
            content.innerHTML = "<h2>ãƒ‹ãƒ¥ãƒ¼ã‚¹</h2><p>ãƒ‹ãƒ¥ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã›ã‚“</p>";
            detail.style.display = "block";
            return;
        }

        content.innerHTML = `
            <h2>æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹</h2>
            <ul style="padding-left:20px;">
                ${latestNewsData.items.map(item => {
                    const safeUrl = (item.link || "#").replace(/'/g, "\\'");
                    const safeTitle = (item.title || "").replace(/</g, "&lt;").replace(/>/g, "&gt;");
                    return `
                        <li style="margin-bottom:10px;">
                            <a href="#"
                               onclick="openNewsInside('${safeUrl}'); return false;"
                               style="color:#4da3ff;">
                                ${safeTitle}
                            </a>
                        </li>
                    `;
                }).join("")}
            </ul>
        `;
        detail.style.display = "block";
        return;

    } else {
        content.innerHTML = "<h2>æƒ…å ±</h2><p>æœªå¯¾å¿œã‚¿ã‚¤ãƒ—</p>";
        detail.style.display = "block";
        return;
    }
}

/* è©³ç´°è¡¨ç¤ºï¼ˆå¤©æ°—ï¼‹ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒªã‚¹ãƒˆï¼‰ */
function openWeatherDetail() {
    const detail = document.getElementById("weather-detail");
    const content = document.getElementById("weather-detail-content");

    let html = `<div class="detail-layout">`;

    // =====================
    // å·¦ï¼šå¤©æ°—
    // =====================
    html += `<div class="detail-weather">`;

    if (latestWeatherData && latestWeatherData.current_weather) {

        const current = latestWeatherData.current_weather;
        const daily = latestWeatherData.daily || { time: [], temperature_2m_max: [], temperature_2m_min: [], precipitation_probability_max: [] };

        html += `
            <div class="weather-header">
                <div style="font-size:22px;">å¥ˆè‰¯</div>
                <div class="weather-temp">${current.temperature}Â°C</div>
                <div class="weather-desc">${getWeatherIcon(current.weathercode)}</div>
            </div>
        `;

        html += `
            <div class="weather-card">
                <h3>ç¾åœ¨ã®è©³ç´°</h3>
                <p>é¢¨é€Ÿ: ${current.windspeed} km/h</p>
                <p>æœ€é«˜æ°—æ¸©: ${daily.temperature_2m_max?.[0] ?? "â€”"}Â°C</p>
                <p>æœ€ä½æ°—æ¸©: ${daily.temperature_2m_min?.[0] ?? "â€”"}Â°C</p>
                <p>é™æ°´ç¢ºç‡: ${daily.precipitation_probability_max?.[0] ?? "â€”"}%</p>
            </div>
        `;

        html += `<div class="weather-card">
                    <h3>5æ—¥é–“äºˆå ±</h3>
                    <div class="forecast-row">`;

        for (let i = 0; i < 5; i++) {
            const day = daily.time?.[i] ? daily.time[i].slice(5) : "";
            const tmax = daily.temperature_2m_max?.[i] ?? "â€”";
            const tmin = daily.temperature_2m_min?.[i] ?? "â€”";
            html += `
                <div class="forecast-item">
                    <div>${day}</div>
                    <div style="font-size:18px;">
                        ${tmax}Â°
                    </div>
                    <div style="font-size:12px; opacity:0.6;">
                        ${tmin}Â°
                    </div>
                </div>
            `;
        }

        html += `</div></div>`;
    } else {
        html += `<div style="padding:16px;"><p>å¤©æ°—ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“</p></div>`;
    }

    html += `</div>`; // å¤©æ°—çµ‚äº†

    // =====================
    // å³ï¼šãƒ‹ãƒ¥ãƒ¼ã‚¹
    // =====================
    html += `<div class="detail-news">
                <h3 style="margin-top:0;">æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹</h3>`;

    if (latestNewsData && latestNewsData.items && latestNewsData.items.length) {
        latestNewsData.items.slice(0, 10).forEach(item => {
            const safeUrl = (item.link || "#").replace(/'/g, "\\'");
            const safeTitle = (item.title || "").replace(/</g, "&lt;").replace(/>/g, "&gt;");
            html += `
                <div class="news-card">
                    <a href="#"
                       onclick="openNewsInside('${safeUrl}'); return false;">
                        ${safeTitle}
                    </a>
                </div>
            `;
        });
    } else {
        html += `<p style="padding:12px;">ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ãªã—</p>`;
    }

    html += `</div>`; // ãƒ‹ãƒ¥ãƒ¼ã‚¹çµ‚äº†

    html += `</div>`; // ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆçµ‚äº†

    // --- å¿…ãšã“ã“ã§å·®ã—è¾¼ã‚€ ---
    content.innerHTML = html;
    detail.style.display = "block";
}

/* è‡ªå‹•æ›´æ–° */
function startInfoAutoUpdate() {
    loadWeather();
    loadNewsHeadline();

    // 10åˆ†ã”ã¨å¤©æ°—æ›´æ–°ã€5åˆ†ã”ã¨ãƒ‹ãƒ¥ãƒ¼ã‚¹æ›´æ–°
    setInterval(loadWeather, 10 * 60 * 1000);
    setInterval(loadNewsHeadline, 5 * 60 * 1000);
}

/* åˆå›èµ·å‹•ã¯ window load ã§ */
window.addEventListener("load", () => {
    startInfoAutoUpdate();
});
</script>

    <div id="secret-homescreen" class="secret-home" style="display:none;">
    <div class="secret-title">è£ãƒ›ãƒ¼ãƒ </div>

    <div class="secret-app-grid">
        <div class="secret-app utopia" onclick="openUtopia()">Utopia</div>
        <div class="secret-app wakame" onclick="openWakame()">Wakame</div>
        <div class="secret-app daydream" onclick="openDayDream()">Day Dream</div>
    </div>
</div>



<!-- ========================= -->
<!-- ã‚¢ãƒ—ãƒªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ -->
<!-- ========================= -->

<div id="youtube" class="app-window" onclick="openYouTube()">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-youtube'); event.stopPropagation();"></div>
        <div class="app-title">YouTube</div>
    </div>
</div>

<script>
function openYouTube() {
    window.open("https://sitepro-d3up.onrender.com/", "_blank");
}

    function preloadImage(url, callback) {
    const img = new Image();
    img.onload = callback;
    img.src = url;
}
</script>


<div id="app-334" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-334')"></div>
        <div class="app-title">33-4</div>
    </div>

    <div id="app-334-inner" style="padding:20px; font-family:monospace;">
        <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°è§£é™¤ã‚µãƒ³ãƒ—ãƒ«</title>
</head>
<body>
<input type="text" id="urlInput" placeholder="URLã‚’å…¥åŠ›">
<button onclick="openWebsite()">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã‚’é–‹ã</button>
<iframe id="websiteFrame" width="100%" height="600"></iframe>

<script>
function openWebsite() {
    var url = document.getElementById("urlInput").value;
    document.getElementById("websiteFrame").src = url;
}
</script>
</body>
</html>
    </div>
</div>

<div id="app-2048" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-2048')"></div>
        <div class="app-title">2048</div>
    </div>

    <div id="app-2048-inner" style="padding:20px; font-family:monospace;">
        
<!-- 2048 ã®ä¸­èº«ï¼ˆçœç•¥ã›ãšæ—¢å­˜ã®ã¾ã¾ï¼‰ -->
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>2048</title>
<style>
  body {
    background: #faf8ef;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 40px;
  }

  #score {
    font-size: 28px;
    margin-bottom: 20px;
    font-weight: bold;
  }

  #autoBtn {
    font-size: 20px;
    padding: 8px 20px;
    margin-bottom: 20px;
  }

  #board {
    position: relative;
    width: 365px;
    height: 365px;
    background: #bbada0;
    border-radius: 10px;
    box-sizing: border-box;
  }

  .cell {
    position: absolute;
    width: 80px;
    height: 80px;
    background: #cdc1b4;
    border-radius: 5px;
  }

  .tile {
    position: absolute;
    width: 80px;
    height: 80px;
    border-radius: 5px;
    font-size: 30px;
    font-weight: bold;
    color: #776e65;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: left 0.15s ease, top 0.15s ease;
  }

  .new { animation: pop 0.2s ease-out; }
  .merge { animation: merge 0.2s ease-out; }

  @keyframes pop {
    0% { transform: scale(0); opacity: 0; }
    60% { transform: scale(1.15); opacity: 1; }
    100% { transform: scale(1); opacity: 1; }
  }

  @keyframes merge {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
  }
</style>
</head>
<body>

<div id="score">Score: 0</div>
<button id="autoBtn">Auto: OFF</button>
<div id="board"></div>

<script>
/* ============================
   åŸºæœ¬è¨­å®š
============================ */
const size = 4;
let board = [];
let score = 0;
let lastSpawn = null;

const boardDiv = document.getElementById("board");
const OFFSET = 7;

const colors = {
  2:"#eee4da",4:"#ede0c8",8:"#f2b179",16:"#f59563",
  32:"#f67c5f",64:"#f65e3b",128:"#edcf72",256:"#edcc61",
  512:"#edc850",1024:"#edc53f",2048:"#edc22e",
  4096:"#3c3a32",8192:"#1f1d1a",
  16384:"#000000",32768:"#4c0000",65536:"#2b0000"
};

/* ============================
   Auto
============================ */
let auto = false;
let autoTimer = null;

document.getElementById("autoBtn").onclick = () => {
  auto = !auto;
  document.getElementById("autoBtn").textContent = auto ? "Auto: ON" : "Auto: OFF";
  if (auto) startAuto();
  else stopAuto();
};

function startAuto() {
  if (autoTimer) return;
  autoTimer = setInterval(() => {
    const dir = getBestMove();
    if (dir) move(dir);
  }, 20);
}

function stopAuto() {
  clearInterval(autoTimer);
  autoTimer = null;
}

/* ============================
   è©•ä¾¡é–¢æ•°
============================ */
function evalEmptyTiles(bd) {
  let c = 0;
  for (let i = 0; i < size; i++)
    for (let j = 0; j < size; j++)
      if (bd[i][j] === 0) c++;
  return c * 700;
}

function evalSmoothness(bd) {
  let s = 0;
  for (let i = 0; i < size; i++) {
    for (let j = 0; j < size; j++) {
      if (bd[i][j] === 0) continue;
      const v = Math.log2(bd[i][j]);
      if (j + 1 < size && bd[i][j+1] !== 0)
        s -= Math.abs(v - Math.log2(bd[i][j+1]));
      if (i + 1 < size && bd[i+1][j] !== 0)
        s -= Math.abs(v - Math.log2(bd[i+1][j]));
    }
  }
  return s * 50;
}

function evalMonotonicity(bd) {
  let s = 0;
  for (let i = 0; i < size; i++)
    for (let j = 0; j < size - 1; j++)
      s += bd[i][j] >= bd[i][j+1] ? 6 : -4;

  for (let j = 0; j < size; j++)
    for (let i = 0; i < size - 1; i++)
      s += bd[i][j] >= bd[i+1][j] ? 6 : -4;

  return s;
}

function maxTilePosition(bd) {
  let max = 0, pos = {i:0,j:0};
  for (let i=0;i<size;i++)
    for (let j=0;j<size;j++)
      if (bd[i][j] > max) { max = bd[i][j]; pos = {i,j}; }
  return pos;
}

function evalMaxTilePosition(bd) {
  const p = maxTilePosition(bd);
  return (size - p.i + size - p.j) * 200;
}

function evaluateBoard(bd) {
  return evalEmptyTiles(bd)
       + evalSmoothness(bd)
       + evalMonotonicity(bd)
       + evalMaxTilePosition(bd);
}

/* ============================
   4æ‰‹å…ˆèª­ã¿ AI
============================ */
function getBestMove() {
  const dirs = ["up", "left", "right", "down"];

  let bestDir = null;
  let bestScore = -Infinity;

  for (const dir of dirs) {
    const b1 = clone(board);
    if (!simulateMove(b1, dir)) continue;

    const spawn1 = getSpawnList(b1);

    let total = 0, count = 0;

    for (const s1 of spawn1) {
      const b2 = clone(b1);
      b2[s1.i][s1.j] = s1.v;

      for (const dir2 of dirs) {
        const b3 = clone(b2);
        if (!simulateMove(b3, dir2)) continue;

        const spawn2 = getSpawnList(b3);

        for (const s2 of spawn2) {
          const b4 = clone(b3);
          b4[s2.i][s2.j] = s2.v;

          for (const dir3 of dirs) {
            const b5 = clone(b4);
            if (!simulateMove(b5, dir3)) continue;

            const spawn3 = getSpawnList(b5);

            for (const s3 of spawn3) {
              const b6 = clone(b5);
              b6[s3.i][s3.j] = s3.v;

              for (const dir4 of dirs) {
                const b7 = clone(b6);
                if (!simulateMove(b7, dir4)) continue;

                total += evaluateBoard(b7);
                count++;
              }
            }
          }
        }
      }
    }

    if (count === 0) continue;

    const avg = total / count;
    if (avg > bestScore) {
      bestScore = avg;
      bestDir = dir;
    }
  }

  return bestDir;
}

function getSpawnList(bd) {
  const empty = getEmpty(bd);
  const list = [];

  const cells = empty.length > 4 ? shuffle(empty).slice(0, 4) : empty;

  for (const pos of cells) {
    list.push({ i: pos.i, j: pos.j, v: 2 });
    list.push({ i: pos.i, j: pos.j, v: 4 });
  }
  return list;
}

/* ============================
   ç›¤é¢å‡¦ç†
============================ */
function clone(bd) {
  return bd.map(r => r.slice());
}

function getEmpty(bd) {
  const a=[];
  for (let i=0;i<size;i++)
    for (let j=0;j<size;j++)
      if (bd[i][j]===0) a.push({i,j});
  return a;
}

function shuffle(a) {
  return a.map(v=>({v,r:Math.random()}))
          .sort((a,b)=>a.r-b.r)
          .map(x=>x.v);
}

function simulateMove(bd, dir) {
  let moved = false;

  function slide(arr) {
    arr = arr.filter(v => v !== 0);
    for (let i = 0; i < arr.length - 1; i++) {
      if (arr[i] === arr[i + 1]) {
        arr[i] *= 2;
        arr[i + 1] = 0;
      }
    }
    arr = arr.filter(v => v !== 0);
    while (arr.length < size) arr.push(0);
    return arr;
  }

  if (dir === "left") {
    for (let i = 0; i < size; i++) {
      const newRow = slide(bd[i]);
      if (newRow.toString() !== bd[i].toString()) moved = true;
      bd[i] = newRow;
    }
  }

  if (dir === "right") {
    for (let i = 0; i < size; i++) {
      let row = bd[i].slice().reverse();
      row = slide(row);
      row.reverse();
      if (row.toString() !== bd[i].toString()) moved = true;
      bd[i] = row;
    }
  }

  if (dir === "up") {
    for (let j = 0; j < size; j++) {
      let col = [];
      for (let i = 0; i < size; i++) col.push(bd[i][j]);
      col = slide(col);
      for (let i = 0; i < size; i++) {
        if (bd[i][j] !== col[i]) moved = true;
        bd[i][j] = col[i];
      }
    }
  }

  if (dir === "down") {
    for (let j = 0; j < size; j++) {
      let col = [];
      for (let i = 0; i < size; i++) col.push(bd[i][j]);
      col = col.reverse();
      col = slide(col);
      col.reverse();
      for (let i = 0; i < size; i++) {
        if (bd[i][j] !== col[i]) moved = true;
        bd[i][j] = col[i];
      }
    }
  }

  return moved;
}

/* ============================
   æç”»
============================ */
function drawGrid() {
  boardDiv.innerHTML = "";
  for (let i=0;i<size;i++)
    for (let j=0;j<size;j++) {
      const c = document.createElement("div");
      c.className="cell";
      c.style.left = j*90 + OFFSET + "px";
      c.style.top  = i*90 + OFFSET + "px";
      boardDiv.appendChild(c);
    }
}

function render(anim=[]) {
  document.querySelectorAll(".tile").forEach(t=>t.remove());
  for (let i=0;i<size;i++)
    for (let j=0;j<size;j++)
      if (board[i][j]!==0) {
        const t = document.createElement("div");
        t.className="tile";
        t.textContent = board[i][j];
        t.style.background = colors[board[i][j]] || "#3c3a32";
        t.style.left = j*90 + OFFSET + "px";
        t.style.top  = i*90 + OFFSET + "px";

        if (lastSpawn && lastSpawn.i===i && lastSpawn.j===j)
          t.classList.add("new");

        const a = anim.find(x=>x.i===i && x.j===j);
        if (a) t.classList.add(a.type);

        boardDiv.appendChild(t);
      }
  lastSpawn = null;
}

function updateScore() {
  document.getElementById("score").textContent = "Score: " + score;
}

/* ============================
   ã‚²ãƒ¼ãƒ å‡¦ç†
============================ */
function spawn() {
  const empty = getEmpty(board);
  if (empty.length===0) return;
  const p = empty[Math.floor(Math.random()*empty.length)];
  board[p.i][p.j] = Math.random()<0.3?4:2;
  lastSpawn = p;
}

function move(dir) {
  let moved = false;
  let anim = [];
  const before = board.map(r=>r.slice());

  function slide(arr) {
    arr = arr.filter(v=>v!==0);
    for (let i=0;i<arr.length-1;i++)
      if (arr[i]===arr[i+1]) { arr[i]*=2; score+=arr[i]; arr[i+1]=0; }
    arr = arr.filter(v=>v!==0);
    while (arr.length<size) arr.push(0);
    return arr;
  }

  if (dir==="left") {
    for (let i=0;i<size;i++) {
      const n = slide(board[i]);
      if (n.toString()!==board[i].toString()) moved=true;
      board[i]=n;
    }
  }
  if (dir==="right") {
    for (let i=0;i<size;i++) {
      let r = board[i].slice().reverse();
      r = slide(r);
      r.reverse();
      if (r.toString()!==board[i].toString()) moved=true;
      board[i]=r;
    }
  }
  if (dir==="up") {
    for (let j=0;j<size;j++) {
      let c=[];
      for (let i=0;i<size;i++) c.push(board[i][j]);
      c = slide(c);
      for (let i=0;i<size;i++) {
        if (board[i][j]!==c[i]) moved=true;
        board[i][j]=c[i];
      }
    }
  }
  if (dir==="down") {
    for (let j=0;j<size;j++) {
      let c=[];
      for (let i=0;i<size;i++) c.push(board[i][j]);
      c = c.reverse();
      c = slide(c);
      c.reverse();
      for (let i=0;i<size;i++) {
        if (board[i][j]!==c[i]) moved=true;
        board[i][j]=c[i];
      }
    }
  }

  if (!moved) return;

  updateScore();

  for (let i=0;i<size;i++)
    for (let j=0;j<size;j++)
      if (board[i][j]!==0 && before[i][j]!==board[i][j])
        anim.push({i,j,type:"merge"});

  render(anim);

  setTimeout(()=>{
    spawn();
    render([{...lastSpawn,type:"new"}]);
    if (isGameOver()) alert("Game Over!");
  },150);
}

function isGameOver() {
  for (let i=0;i<size;i++)
    for (let j=0;j<size;j++) {
      if (board[i][j]===0) return false;
      if (j<size-1 && board[i][j]===board[i][j+1]) return false;
      if (i<size-1 && board[i][j]===board[i+1][j]) return false;
    }
  return true;
}

/* ============================
   åˆæœŸåŒ–
============================ */
function init() {
  board = Array.from({length:size},()=>Array(size).fill(0));
  score = 0;
  updateScore();
  drawGrid();
  spawn();
  spawn();
  render();
}

document.addEventListener("keydown", e => {
  if (e.key==="ArrowLeft") move("left");
  if (e.key==="ArrowRight") move("right");
  if (e.key==="ArrowUp") move("up");
  if (e.key==="ArrowDown") move("down");
});

init();
</script>

</body>
</html>
    </div>
</div>

<div id="app-tver" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-tver')"></div>
        <div class="app-title">TVer</div>
    </div>
    <iframe id="tver-iframe"
        src="https://tver.jp"
        style="width:100%; height:calc(100% - 40px); border:none;"
        allow="autoplay; encrypted-media; picture-in-picture; fullscreen"
        allowfullscreen>
    </iframe>
</div>

<!-- ========================= -->
<!-- è¨­å®šã‚¢ãƒ—ãƒª -->
<!-- ========================= -->
<div id="app-settings" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-settings')"></div>
        <div class="app-title">è¨­å®š</div>
    </div>

    <div class="settings-container">
        <div class="settings-menu">
            <div class="settings-item" onclick="openSettingsPage('wallpaper')">å£ç´™</div>
            <div class="settings-item" onclick="openSettingsPage('ura')">è£ãƒ¢ãƒ¼ãƒ‰</div>
            <div class="settings-item" onclick="openSettingsPage('system')">ã‚·ã‚¹ãƒ†ãƒ </div>
            <div class="settings-item" onclick="openSettingsPage('info')">æƒ…å ±</div>
            <div class="settings-item" onclick="openSettingsPage('news')">news</div>
        </div>

        <div class="settings-content" id="settings-content">
            <div class="settings-placeholder">è¨­å®šé …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
        </div>
    </div>
</div>

<script>
/* ============================
   æ™‚è¨ˆï¼ˆãƒ­ãƒƒã‚¯ç”»é¢ï¼‰
============================ */
function updateClock() {
    const now = new Date();
    const format = loadClockFormat(); // "12" or "24"

    const date = now.toLocaleDateString("ja-JP", {
        month: "long",
        day: "numeric",
        weekday: "long"
    });

    let time;

    if (format === "12") {
        // â˜… AM/PM ã‚’ä»˜ã‘ãšã« 12æ™‚é–“è¡¨ç¤º
        time = now.toLocaleTimeString("ja-JP", {
            hour: "2-digit",
            minute: "2-digit"
        });

        // â˜… 24æ™‚é–“â†’12æ™‚é–“ã«å¤‰æ›ï¼ˆAM/PMãªã—ï¼‰
        let h = now.getHours();
        let m = now.getMinutes().toString().padStart(2, "0");

        h = h % 12;
        if (h === 0) h = 12;

        time = `${h}:${m}`;
    } else {
        // 24æ™‚é–“è¡¨ç¤º
        time = now.toLocaleTimeString("ja-JP", {
            hour: "2-digit",
            minute: "2-digit",
            hour12: false
        });
    }

    document.getElementById("lock-date").textContent = date;
    document.getElementById("lock-time").textContent = time;
}
/* ============================
   ãƒ­ãƒƒã‚¯è§£é™¤
============================ */
document.getElementById("lockscreen").addEventListener("click", () => {
    document.getElementById("lockscreen").style.display = "none";
    document.getElementById("homescreen").style.display = "block";
});

/* ============================
   ã‚¢ãƒ—ãƒªé–‹é–‰
   closeApp ã¯ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³è§£é™¤ã‚’è€ƒæ…®ã™ã‚‹å®Ÿè£…
============================ */
function openApp(id) {
    const el = document.getElementById(id);
    if (!el) return;
    el.style.display = "block";

    // ä¾‹ï¼šyoutube ãƒˆãƒªã‚¬ã¯å¤–éƒ¨ã‚¿ãƒ–ï¼ˆäº’æ›æ€§ä¿æŒï¼‰
    if (id === "youtube") {
        window.open("https://sitepro-d3up.onrender.com/", "_blank");
        return;
    }

    // å¤©æ°—è©³ç´°ã‚’é–‹ãã¨ãã¯æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’åæ˜ ï¼ˆæ—¢ã« openWeatherDetail ã§ã‚„ã£ã¦ã„ã‚‹ï¼‰
}

async function closeApp(id) {
    const app = document.getElementById(id);
    if (!app) return;

    try {
        // ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå…¨ç”»é¢ã«ãªã£ã¦ã„ã¦ã€é–‹ã„ã¦ã„ã‚‹ app ãŒãã®å…¨ç”»é¢è¦ç´ 
        const fs = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;
        if (fs) {
            // ã‚‚ã—å…¨ç”»é¢è¦ç´ ãŒé–‰ã˜ã‚‹å¯¾è±¡ã®å†…éƒ¨ã«ã‚ã‚‹ã€ã¾ãŸã¯å¯¾è±¡è‡ªèº«ã§ã‚ã‚Œã°è§£é™¤ã™ã‚‹
            if (fs === app || app.contains(fs)) {
                if (document.exitFullscreen) await document.exitFullscreen();
                else if (document.webkitExitFullscreen) await document.webkitExitFullscreen();
                else if (document.mozCancelFullScreen) await document.mozCancelFullScreen();
                else if (document.msExitFullscreen) await document.msExitFullscreen();
            }
        }
    } catch (e) {
        console.warn("fullscreen exit failed", e);
    } finally {
        app.style.display = "none";
    }
}

/* ============================
   è¨­å®šã‚¢ãƒ—ãƒªï¼šãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ
   ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾æ´»ã‹ã™ï¼‰
============================ */

    function changeNewsSource(source) {
    localStorage.setItem("news-source", source);
    loadNewsHeadline(); // å³æ™‚åæ˜ 
}

function loadNewsSettings() {
    const sel = localStorage.getItem("news-source") || "nhk";
    const radio = document.querySelector(`input[name="news-src"][value="${sel}"]`);
    if (radio) radio.checked = true;
}
function openSettingsPage(page) {
    const content = document.getElementById("settings-content");

    if (page === "wallpaper") {
        content.innerHTML = `
            <h2>å£ç´™</h2>

            <div class="wallpaper-section-title">URL ã‹ã‚‰è¿½åŠ ï¼ˆæœ€å¤§5æšï¼‰</div>
            <input id="wallpaper-url-input" type="text" placeholder="ç”»åƒURLã‚’å…¥åŠ›"
                style="width:70%; padding:6px; border-radius:6px; border:1px solid #ccc;">
            <button onclick="addCustomWallpaper()"
                style="padding:6px 12px; margin-left:6px; border-radius:6px; background:#007aff; color:white; border:none;">
                è¿½åŠ 
            </button>

            <div class="wallpaper-section-title">ã‚«ã‚¹ã‚¿ãƒ å£ç´™</div>
            <div class="wallpaper-grid" id="custom-wallpaper-grid"></div>

            <div class="wallpaper-section-title">ãƒ­ãƒƒã‚¯ç”»é¢ï¼ˆæ—¢å®šï¼‰</div>
            <div class="wallpaper-grid">
                <div class="wallpaper-thumb"
                    style="background-image:url('https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg')"
                    onclick="setWallpaper('lockscreen', 'win11')">
                </div>
            </div>

            <div class="wallpaper-section-title">ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆæ—¢å®šï¼‰</div>
            <div class="wallpaper-grid">
                <div class="wallpaper-thumb"
                    style="background-image:url('https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg')"
                    onclick="setWallpaper('homescreen', 'divnil')">
                </div>
            </div>
        `;

        loadCustomWallpapers();
        highlightSelectedWallpapers();
        return;
    }

    if (page === "ura") {
    content.innerHTML = `
        <h2>è£ãƒ¢ãƒ¼ãƒ‰</h2>
        <p>ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>

        <input id="ura-pass" type="password" maxlength="12"
            style="padding:10px; font-size:18px; width:180px; text-align:center;">

        <button onclick="checkUraPass()"
            style="padding:8px 16px; margin-left:10px;">OK</button>

        <div id="ura-result" style="margin-top:10px; color:#888;"></div>

        <div id="ura-menu" style="display:none; margin-top:20px;">
            <h3>éš ã—ã‚¢ãƒ—ãƒª</h3>

            <button onclick="openUtopia()"
                style="padding:10px 16px; margin-right:10px;">utopia</button>

            <button onclick="openWakame()"
                style="padding:10px 16px;">wakame</button>
        </div>
    `;
    return;
}

    if (page === "system") {
    content.innerHTML = `
        <h2>ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</h2>

        <h3>æ™‚è¨ˆ</h3>
        <label>
            <input type="radio" name="clock-format" value="24" onchange="setClockFormat(24)">
            24æ™‚é–“è¡¨ç¤º
        </label><br>
        <label>
            <input type="radio" name="clock-format" value="12" onchange="setClockFormat(12)">
            12æ™‚é–“è¡¨ç¤º
        </label>

        <h3 style="margin-top:20px;">Dock</h3>
        <label>
            <input type="checkbox" id="dock-toggle" onchange="toggleDock()">
            Dock ã‚’è¡¨ç¤ºã™ã‚‹
        </label>

        <h3 style="margin-top:20px;">ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º</h3>
        <select onchange="changeIconSize(this.value)">
            <option value="small">å°</option>
            <option value="medium" selected>ä¸­</option>
            <option value="large">å¤§</option>
        </select>
    `;

    // ç¾åœ¨ã®è¨­å®šã‚’åæ˜ 
    loadSystemSettings();
    return;
}

    if (page === "info") {
    content.innerHTML = `
        <h2>æƒ…å ±</h2>

        <p>OS åï¼škumaOS</p>
        <p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼š1.0.0</p>
        <p>é–‹ç™ºè€…ï¼šhinata</p>

        <h3>ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h3>
        <p>ãƒ–ãƒ©ã‚¦ã‚¶ï¼š${navigator.userAgent}</p>
        <p>ç”»é¢ã‚µã‚¤ã‚ºï¼š${window.innerWidth} x ${window.innerHeight}</p>
    `;
    return;
}
    if (page === "news") {
        content.innerHTML = `
            <h2>ãƒ‹ãƒ¥ãƒ¼ã‚¹è¨­å®š</h2>
            <label>
                <input type="radio" name="news-src" value="nhk"
                onchange="changeNewsSource('nhk')"> NHK
            </label><br>

            <label>
                <input type="radio" name="news-src" value="yahoo"
                onchange="changeNewsSource('yahoo')"> Yahooãƒ‹ãƒ¥ãƒ¼ã‚¹
            </label>
        `;
        loadNewsSettings();
        return; // â† å¿…ãšå…¥ã‚Œã‚‹
    }
}

</script>

<script>
    function checkUraPass() {
    const input = document.getElementById("ura-pass").value;
    const result = document.getElementById("ura-result");

    if (input === "jagdyufr5t62") {
        result.textContent = "èªè¨¼æˆåŠŸï¼è£ãƒ›ãƒ¼ãƒ ã¸ç§»å‹•ã—ã¾ã™ã€‚";

        // â˜… è¨­å®šã‚’é–‰ã˜ã¦è£ãƒ›ãƒ¼ãƒ ã¸ç§»å‹•
        unlockSecretMode();

    } else {
        result.textContent = "ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚";
    }
}

    function openWakame() {
    window.open("https://wkt-hcic.onrender.com/", "_blank");
}

function openUtopia() {
    window.open("https://utopia.nana.mr-moo.co.uk/", "_blank");
}
    function toggleDock() {
    const enabled = document.getElementById("dock-toggle").checked;
    localStorage.setItem("dock-enabled", enabled ? "1" : "0");

    const dock = document.getElementById("dock");
    if (dock) dock.style.display = enabled ? "flex" : "none";
}
</script>

<script>
/* ============================
   å£ç´™è¨­å®šï¼ˆæ—¢å®š + ã‚«ã‚¹ã‚¿ãƒ ï¼‰
   æ—¢å­˜ã®å®Ÿè£…ã‚’ä¿ã¤ã€‚èµ·å‹•æ™‚ã®åæ˜ ã‚‚ç¶­æŒã€‚
============================ */
function setWallpaper(target, name) {

    // ã‚«ã‚¹ã‚¿ãƒ å£ç´™
    if (target === "custom") {
        let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");
        const url = list[name];
        if (!url) return;

        document.getElementById("homescreen").style.backgroundImage = `url('${url}')`;
        document.getElementById("lockscreen").style.backgroundImage = `url('${url}')`;

        localStorage.setItem("wallpaper-lock", "custom-" + name);
        localStorage.setItem("wallpaper-home", "custom-" + name);

        highlightSelectedWallpapers();
        return;
    }

    // æ—¢å®šãƒ­ãƒƒã‚¯ç”»é¢
    if (target === "lockscreen") {
        if (name === "win11") {
            document.getElementById("lockscreen").style.backgroundImage =
                "url('https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg')";
        }
        localStorage.setItem("wallpaper-lock", name);
    }

    // æ—¢å®šãƒ›ãƒ¼ãƒ ç”»é¢
    if (target === "homescreen") {
        if (name === "divnil") {
            document.getElementById("homescreen").style.backgroundImage =
                "url('https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg')";
        }
        localStorage.setItem("wallpaper-home", name);
    }

    highlightSelectedWallpapers();
}

/* highlight / applySaved / custom loaders (æ—¢å­˜ã‚³ãƒ¼ãƒ‰) */
function highlightSelectedWallpapers() {
    const lock = localStorage.getItem("wallpaper-lock");
    const home = localStorage.getItem("wallpaper-home");

    document.querySelectorAll(".wallpaper-thumb").forEach(el => {
        el.classList.remove("selected");
    });

    // æ—¢å®šãƒ­ãƒƒã‚¯
    if (lock === "win11") {
        const el = document.querySelector(".wallpaper-section-title:nth-of-type(3) + .wallpaper-grid .wallpaper-thumb");
        if (el) el.classList.add("selected");
    }

    // æ—¢å®šãƒ›ãƒ¼ãƒ 
    if (home === "divnil") {
        const el = document.querySelector(".wallpaper-section-title:nth-of-type(4) + .wallpaper-grid .wallpaper-thumb");
        if (el) el.classList.add("selected");
    }

    // ã‚«ã‚¹ã‚¿ãƒ 
    if (lock && lock.startsWith("custom-")) {
        const index = Number(lock.replace("custom-", ""));
        const grid = document.getElementById("custom-wallpaper-grid");
        if (grid && grid.children[index]) {
            grid.children[index].classList.add("selected");
        }
    }
}

function applySavedWallpapers() {
    const lock = localStorage.getItem("wallpaper-lock");
    const home = localStorage.getItem("wallpaper-home");

    let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");

    // ã‚«ã‚¹ã‚¿ãƒ å£ç´™ï¼ˆãƒ­ãƒƒã‚¯ï¼‰
    if (lock && lock.startsWith("custom-")) {
        const index = Number(lock.replace("custom-", ""));
        const url = list[index];
        if (url) {
            document.getElementById("lockscreen").style.backgroundImage = `url('${url}')`;
        }
    }

    // ã‚«ã‚¹ã‚¿ãƒ å£ç´™ï¼ˆãƒ›ãƒ¼ãƒ ï¼‰
    if (home && home.startsWith("custom-")) {
        const index = Number(home.replace("custom-", ""));
        const url = list[index];
        if (url) {
            document.getElementById("homescreen").style.backgroundImage = `url('${url}')`;
        }
    }

    // æ—¢å®šãƒ­ãƒƒã‚¯
    if (lock === "win11") {
        document.getElementById("lockscreen").style.backgroundImage =
            "url('https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg')";
    }

    // æ—¢å®šãƒ›ãƒ¼ãƒ 
    if (home === "divnil") {
        document.getElementById("homescreen").style.backgroundImage =
            "url('https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg')";
    }
}

/* ã‚«ã‚¹ã‚¿ãƒ è¿½åŠ  */
function addCustomWallpaper() {
    const input = document.getElementById("wallpaper-url-input");
    if (!input) return;

    const url = input.value.trim();
    if (!url) return;

    let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");

    list.push(url);

    localStorage.setItem("custom-wallpapers", JSON.stringify(list));

    loadCustomWallpapers();
    input.value = "";
}

function loadCustomWallpapers() {
    const grid = document.getElementById("custom-wallpaper-grid");
    if (!grid) return;

    grid.innerHTML = "";

    let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");

    list.forEach((url, index) => {
        const div = document.createElement("div");
        div.className = "wallpaper-thumb";
        div.style.backgroundImage = `url('${url}')`;
        div.onclick = () => setWallpaper("custom", index);
        grid.appendChild(div);
    });

    highlightSelectedWallpapers();
}

/* èµ·å‹•æ™‚ã«å£ç´™ã‚’åæ˜  */
window.addEventListener("load", applySavedWallpapers);
</script>

<script>
    function changeIconSize(size) {
    localStorage.setItem("icon-size", size);
    applyIconSize();
}

function applyIconSize() {
    const size = localStorage.getItem("icon-size") || "medium";
    const icons = document.querySelectorAll(".app-icon");

    icons.forEach(icon => {
        if (size === "small") {
            icon.style.width = "60px";
            icon.style.height = "60px";
            icon.style.fontSize = "20px";
        } else if (size === "large") {
            icon.style.width = "100px";
            icon.style.height = "100px";
            icon.style.fontSize = "32px";
        } else {
            icon.style.width = "80px";
            icon.style.height = "80px";
            icon.style.fontSize = "26px";
        }
    });
}
    function loadSystemSettings() {
    // æ™‚è¨ˆ
    const format = loadClockFormat();
    const radio = document.querySelector(`input[name="clock-format"][value="${format}"]`);
    if (radio) radio.checked = true;

    // Dock
    const dockEnabled = localStorage.getItem("dock-enabled") === "1";
    const dockToggle = document.getElementById("dock-toggle");
    if (dockToggle) dockToggle.checked = dockEnabled;

    // ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º
    applyIconSize();
}
    function loadClockFormat() {
    return localStorage.getItem("clock-format") || "24";
}

updateClock();
setInterval(updateClock, 1000);
    function getResetKey() {
    const now = new Date();
    const d = new Date(now);

    if (d.getHours() < 6) {
        d.setDate(d.getDate() - 1);
    }

    return d.getFullYear() + "-" +
           (d.getMonth() + 1) + "-" +
           d.getDate();
}

function incrementSecretCount() {

    const key = getResetKey();
    const saved = JSON.parse(localStorage.getItem("secretData")) || {};

    if (saved.key !== key) {
        saved.key = key;
        saved.count = 0;
    }

    saved.count = (saved.count || 0) + 1;

    localStorage.setItem("secretData", JSON.stringify(saved));
}

/* ãƒ©ãƒ³ãƒ€ãƒ è£ãƒ›ãƒ¼ãƒ èƒŒæ™¯ */
function setRandomSecretBackground() {
    const images = [
        "moon.png",
        "https://as1.ftcdn.net/jpg/02/12/02/70/1000_F_212027023_opZTy3Yso4HUNzYVAW94c9bYwuUsptaT.jpg",
        "moon1.png"
    ];

    const randomImage = images[Math.floor(Math.random() * images.length)];

    const secret = document.getElementById("secret-homescreen");
    if (secret) secret.style.backgroundImage = `url('${randomImage}')`;
}

/* åˆå›ãƒ­ãƒ¼ãƒ‰ã§è£èƒŒæ™¯ã‚‚è¨­å®š */
window.addEventListener("load", () => {
    const bar = document.getElementById("weather-bar");
    if (bar) {
        bar.innerHTML = "å¥ˆè‰¯ ğŸŒ¤ èª­ã¿è¾¼ã¿ä¸­... ï½œ ãƒ‹ãƒ¥ãƒ¼ã‚¹å–å¾—ä¸­...";
    }
});
    async function openNewsInside(url){
    // kumaOS ã®å®Ÿè£…ã§ã¯ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®IDã¯ "app-news" ãªã®ã§ãã‚Œã‚’é–‹ã
    openApp("app-news");

    const frame = document.getElementById("news-frame");
    if(!frame){
        console.error("news-frame ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        return;
    }

    // NHK ã¯ãã®ã¾ã¾ iframe ã«å…¥ã‚Œã‚‹
    if(url.includes("nhk.or.jp")){
        frame.src = url;
        return;
    }

    // Yahoo ã¯ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§èª­ã¿è¾¼ã‚€
    if(url.includes("yahoo.co.jp")){
        await openYahooProxyInside(url);
        return;
    }

    // ãã‚Œä»¥å¤–ã¯ç›´æ¥ iframe ã«å…¥ã‚Œã‚‹ï¼ˆCSPã‚„X-Frame-Optionsã§å¼¾ã‹ã‚Œã‚‹å ´åˆã‚ã‚Šï¼‰
    frame.src = url;
}
/* Yahooãƒ—ãƒ­ã‚­ã‚· */
async function openYahooProxyInside(url){
    const frame = document.getElementById("news-frame");
    if(!frame){
        console.error("news-frame ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“");
        return;
    }

    const proxies = [
        u => "https://corsproxy.io/?" + encodeURIComponent(u),
        u => "https://api.allorigins.win/raw?url=" + encodeURIComponent(u),
        u => "https://thingproxy.freeboard.io/fetch/" + encodeURIComponent(u)
    ];

    for (const proxy of proxies) {
        try {
            const res = await fetch(proxy(url));
            if (!res.ok) continue;

            const html = await res.text();
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");

            // ã‚µã‚¤ãƒˆå†…ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã«è¦ªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã® openNewsInside ã‚’å‘¼ã¶ã‚ˆã†ã«æ›¸ãæ›ãˆ
            doc.querySelectorAll("a[href]").forEach(a => {
                try {
                    const href = new URL(a.getAttribute("href"), url).href;
                    // ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§æ¸¡ã™ã®ã§ href ä¸­ã® ' ã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
                    const safe = href.replace(/'/g, "\\'");
                    a.setAttribute("onclick", `window.parent.openNewsInside('${safe}'); return false;`);
                    a.setAttribute("href", "#");
                    a.removeAttribute("target");
                } catch (e) {
                    // ç„¡åŠ¹ãª href ã®å ´åˆã¯ç„¡è¦–
                }
            });

            // ç”»åƒã‚’ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã«ç½®ãæ›ãˆï¼ˆé…å»¶èª­ã¿è¾¼ã¿ç­‰ã¯ãŠå¥½ã¿ã§ï¼‰
            doc.querySelectorAll("img[src]").forEach(img => {
                try {
                    const src = new URL(img.getAttribute("src"), url).href;
                    img.src = proxy(src);
                    img.loading = "lazy";
                } catch (e){}
            });

            const blob = new Blob([doc.documentElement.outerHTML], { type: "text/html" });
            frame.src = URL.createObjectURL(blob);
            return;
        } catch (e) {
            console.warn("proxy failed for", proxy(url), e);
            // æ¬¡ã®ãƒ—ãƒ­ã‚­ã‚·ã¸
        }
    }

    // å…¨ãƒ—ãƒ­ã‚­ã‚·å¤±æ•—æ™‚
    frame.srcdoc = `<h2>èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ</h2><p>ãƒ—ãƒ­ã‚­ã‚·ã§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>`;
}
    window.addEventListener("load", loadUsers);

</script>

<!-- ===== å¤©æ°—ãƒãƒ¼ ===== -->
<div id="weather-bar" onclick="openWeatherDetail()">
    å¥ˆè‰¯ã®å¤©æ°—ã‚’å–å¾—ä¸­...
</div>

<!-- ===== å¤©æ°—è©³ç´°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ ===== -->
<div id="weather-detail" class="app-window" style="display:none;">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('weather-detail')"></div>
        <div class="app-title">å¥ˆè‰¯ã®å¤©æ°—</div>
    </div>

    <div id="weather-detail-content" style="padding:20px; overflow:auto;">
        èª­ã¿è¾¼ã¿ä¸­...
    </div>
</div>
    <div id="app-news" class="app-window">

    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-news')"></div>
        <div class="app-title">ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
    </div>

    <div style="padding:10px">

        <button onclick="openNHK()">NHKãƒ‹ãƒ¥ãƒ¼ã‚¹</button>
        <button onclick="openYahoo()">Yahooãƒ‹ãƒ¥ãƒ¼ã‚¹</button>

        <input id="news-url" style="width:60%" placeholder="URL">
        <button onclick="loadYahooProxy()">é–‹ã</button>

    </div>

    <iframe id="news-frame"
        style="width:100%; height:calc(100% - 80px); border:none;">
    </iframe>

</div>


</body>
</html>
