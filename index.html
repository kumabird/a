<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>iPadé¢¨OS</title>

<style>
    #secret-homescreen {
    opacity: 0;
    transition: opacity 0.5s ease;
    display: block; /* â† ã“ã“ãŒé‡è¦ */
}
    
    #wakame-app,
#utopia-app {
    display: none;
    opacity: 0;
    transition: opacity 0.2s ease;
}

    #lockscreen,
#homescreen,
#settings-app,
#secret-homescreen,
#wakame-app,
#utopia-app {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}

/* è¡¨ç¤ºé †ã‚’å›ºå®šï¼ˆãƒãƒ©ã¤ãé˜²æ­¢ï¼‰ */
#lockscreen { z-index: 10; }
#homescreen { z-index: 20; }
#settings-app { z-index: 30; }
#secret-homescreen { z-index: 40; }
#wakame-app { z-index: 50; }
#utopia-app { z-index: 60; }

    .secret-app-screen {
    background-image: url("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTbVzuXFeDisou2bPV9W39tV3unZ4cj26qihA&s");
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
}

    .secret-app {
    width: 120px;
    height: 120px;
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    font-weight: bold;
    margin: 20px;
    cursor: pointer;
    transition: 0.2s;
}

/* Wakameï¼šé»’ Ã— ãƒã‚ªãƒ³ã‚°ãƒªãƒ¼ãƒ³ */
.secret-app.wakame {
    background: black;
    color: #00ff88;
    box-shadow: 0 0 15px #00ff88;
}
.secret-app.wakame:hover {
    box-shadow: 0 0 25px #00ff88;
}

/* Utopiaï¼šé»’ Ã— ãƒã‚ªãƒ³æ¿ƒã„ç©ºè‰² */
.secret-app.utopia {
    background: black;
    color: #00c8ff;
    box-shadow: 0 0 15px #00c8ff;
}
.secret-app.utopia:hover {
    box-shadow: 0 0 25px #00c8ff;
}
    .secret-title {
    font-size: 32px;
    font-weight: bold;
    text-align: center;
    margin-top: 40px;
    text-shadow: 0 0 10px black;
}

.secret-app-grid {
    display: flex;
    justify-content: center;
    margin-top: 40px;
}

/* ===== å…¨ä½“ ===== */
body {
    margin: 0;
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
}

/* ===== ãƒ­ãƒƒã‚¯ç”»é¢ ===== */
#lockscreen {
    position: absolute;
    inset: 0;
    background: url("https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg");
    background-size: cover;
    background-position: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding-top: 120px;
    color: white;
    text-shadow: 0 0 12px rgba(0,0,0,0.6);
    z-index: 1000;
}

#lock-date {
    font-size: 35px;
    font-weight: 600;
    margin-bottom: 10px;
}

#lock-time {
    font-size: 88px;
    font-weight: 700;
    line-height: 1;
}

/* ===== ãƒ›ãƒ¼ãƒ ç”»é¢ ===== */
#homescreen {
    position: absolute;
    inset: 0;
    background: url("https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg");
    background-size: cover;
    background-position: center;
    display: none;
    z-index: 900;
}

/* ===== ã‚¢ã‚¤ã‚³ãƒ³ã‚°ãƒªãƒƒãƒ‰ ===== */
.app-grid {
    position: absolute;
    top: 80px;
    left: 60px;
    display: grid;
    grid-template-columns: repeat(4, 80px);
    grid-auto-rows: 100px;
    gap: 28px;
}

/* ===== ã‚¢ã‚¤ã‚³ãƒ³ ===== */
.app-icon {
    width: 80px;
    height: 80px;
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 26px;
    color: white;
    cursor: pointer;
    box-shadow: 0 8px 18px rgba(0,0,0,0.35);
    backdrop-filter: blur(10px);
}

.app-label {
    margin-top: 4px;
    text-align: center;
    font-size: 12px;
    color: white;
    text-shadow: 0 0 6px rgba(0,0,0,0.8);
}

/* ===== ã‚¢ã‚¤ã‚³ãƒ³è‰² ===== */
.icon-youtube { background: #ff0000; }
.icon-334 { background: #007aff; }
.icon-2048 { background: #edc22e; font-size: 24px; font-weight: 700; }

.icon-tver {
    background: #ffffff;
    font-size: 26px;
    display: flex;
    align-items: center;
    justify-content: center;
}
.tver-tv { color: #00b7ff; font-weight: 1000; }
.tver-er { color: #555555; font-weight: 600; }

.icon-settings {
    background: #8e8e93;
    font-size: 32px;
}

/* ===== ã‚¢ãƒ—ãƒªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ ===== */
.app-window {
    position: absolute;
    inset: 0;
    background: white;
    display: none;
    z-index: 950;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 30px rgba(0,0,0,0.4);
}

.app-titlebar {
    height: 40px;
    background: #f2f2f7;
    display: flex;
    align-items: center;
    padding: 0 12px;
    border-bottom: 1px solid #ccc;
}

.close-btn {
    width: 18px;
    height: 18px;
    background: #ff5f57;
    border-radius: 50%;
    cursor: pointer;
    margin-right: 10px;
}

.app-title {
    font-size: 14px;
    font-weight: 600;
}

/* ===== è¨­å®šã‚¢ãƒ—ãƒª ===== */
.settings-container {
    display: flex;
    height: 100%;
}

.settings-menu {
    width: 200px;
    background: #f2f2f7;
    border-right: 1px solid #ddd;
    padding-top: 10px;
}

.settings-item {
    padding: 12px 16px;
    font-size: 14px;
    cursor: pointer;
    border-radius: 6px;
    margin: 4px 8px;
}

.settings-item:hover {
    background: #e5e5ea;
}

.settings-content {
    flex: 1;
    background: #ffffff;
    padding: 20px;
    overflow-y: auto;
}

.settings-placeholder {
    color: #888;
    font-size: 14px;
}

/* ===== å£ç´™ã‚µãƒ ãƒã‚¤ãƒ« ===== */
.wallpaper-section-title {
    font-size: 18px;
    font-weight: 600;
    margin: 10px 0;
}

.wallpaper-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 16px;
}

.wallpaper-thumb {
    width: 100%;
    height: 90px;
    border-radius: 12px;
    background-size: cover;
    background-position: center;
    cursor: pointer;
    border: 3px solid transparent;
    transition: 0.2s;
}

.wallpaper-thumb.selected {
    border: 3px solid #007aff;
}
</style>
</head>

<body>
<!-- ========================= -->
<!-- ãƒ­ãƒƒã‚¯ç”»é¢ -->
<!-- ========================= -->
<div id="lockscreen">
    <div id="lock-date"></div>
    <div id="lock-time"></div>
</div>

<!-- ========================= -->
<!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
<!-- ========================= -->
<div id="homescreen">
    <div class="app-grid">

        <!-- YouTube ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆæ–°ã—ã„ã‚¿ãƒ–ã§é–‹ãï¼‰ -->
        <div class="app-item" onclick="openYouTubeTab()">
            <div class="app-icon icon-youtube">â–¶</div>
            <div class="app-label">youtube</div>
        </div>
        
        <div onclick="openApp('app-334')">
            <div class="app-icon icon-334">ğŸŒ</div>
            <div class="app-label">33-4</div>
        </div>

        <div onclick="openApp('app-2048')">
            <div class="app-icon icon-2048">2048</div>
            <div class="app-label">2048</div>
        </div>

        <div onclick="openApp('app-tver')">
            <div class="app-icon icon-tver">
                <span class="tver-tv">tv</span><span class="tver-er">er</span>
            </div>
            <div class="app-label">TVer</div>
        </div>

        <div onclick="openApp('app-settings')">
            <div class="app-icon icon-settings">âš™ï¸</div>
            <div class="app-label">è¨­å®š</div>
        </div>

    </div>
</div>
        <script>
            function hideAllScreens() {
    const ids = [
        "lockscreen",
        "homescreen",
        "settings-app",
        "secret-homescreen",
        "wakame-app",
        "utopia-app"
    ];

    ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) {
            el.style.display = "none";
            el.style.opacity = 0;
        }
    });
}

function openYouTubeTab() {
    window.open("https://newpro-3xg0.onrender.com/", "_blank");
}
            function unlockSecretMode() {
    // é€šå¸¸ç”»é¢ã‚’éš ã™
    const lock = document.getElementById("lockscreen");
    const home = document.getElementById("homescreen");
    if (lock) lock.style.display = "none";
    if (home) home.style.display = "none";

    function closeSettingsApp() {
    const ids = [
        "settings-app",
        "settings",
        "settings-container",
        "settingsApp",
        "settingsMenu",
        "settings-screen",
        "settingsUI"
    ];

    ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) el.style.display = "none";
    });
}
    // è£ãƒ›ãƒ¼ãƒ ã‚’è¡¨ç¤º
    const secret = document.getElementById("secret-homescreen");
    if (secret) secret.style.display = "block";
}

</script>
    <!-- è£ãƒ›ãƒ¼ãƒ ç”»é¢ -->
<div id="secret-homescreen" class="secret-home" style="display:none;">
    <div class="secret-title">è£ãƒ›ãƒ¼ãƒ </div>

    <!-- è£ãƒ›ãƒ¼ãƒ ã®ã‚¢ãƒ—ãƒªä¸€è¦§ï¼ˆã“ã“ã«ç½®ãã®ãŒæ­£ã—ã„ï¼‰ -->
    <div class="secret-app-grid">
        <div class="secret-app utopia" onclick="openUtopia()">Utopia</div>
        <div class="secret-app wakame" onclick="openWakame()">Wakame</div>
    </div>
</div>

<!-- ========================= -->
<!-- ã‚¢ãƒ—ãƒªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ -->
<!-- ========================= -->

<div id="youtube" class="app-window" onclick="openYouTube()">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-youtube'); event.stopPropagation();"></div>
        <div class="app-title">YouTube</div>
    </div>
</div>

<script>
function openYouTube() {
    window.open("https://newpro-3xg0.onrender.com/", "_blank");
}
    function preloadImage(url, callback) {
    const img = new Image();
    img.onload = callback;
    img.src = url;
}
</script>


<div id="app-334" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-334')"></div>
        <div class="app-title">33-4</div>
    </div>

    <div id="app-334-inner" style="padding:20px; font-family:monospace;">
        ã“ã“ã« 33-4 ã®ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚‹
    </div>
</div>

<div id="app-2048" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-2048')"></div>
        <div class="app-title">2048</div>
    </div>

    <div id="app-2048-inner" style="padding:20px; font-family:monospace;">
        ã“ã“ã« 2048 ã®ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚‹
    </div>
</div>

<div id="app-tver" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-tver')"></div>
        <div class="app-title">TVer</div>
    </div>
    <iframe src="https://tver.jp" style="width:100%; height:calc(100% - 40px); border:none;"></iframe>
</div>

<!-- ========================= -->
<!-- è¨­å®šã‚¢ãƒ—ãƒª -->
<!-- ========================= -->
<div id="app-settings" class="app-window">
    <div class="app-titlebar">
        <div class="close-btn" onclick="closeApp('app-settings')"></div>
        <div class="app-title">è¨­å®š</div>
    </div>

    <div class="settings-container">
        <div class="settings-menu">
            <div class="settings-item" onclick="openSettingsPage('wallpaper')">å£ç´™</div>
            <div class="settings-item" onclick="openSettingsPage('ura')">è£ãƒ¢ãƒ¼ãƒ‰</div>
            <div class="settings-item" onclick="openSettingsPage('system')">ã‚·ã‚¹ãƒ†ãƒ </div>
            <div class="settings-item" onclick="openSettingsPage('info')">æƒ…å ±</div>
        </div>

        <div class="settings-content" id="settings-content">
            <div class="settings-placeholder">è¨­å®šé …ç›®ã‚’é¸æŠã—ã¦ãã ã•ã„</div>
        </div>
    </div>
</div>
<script>
/* ============================
   æ™‚è¨ˆï¼ˆãƒ­ãƒƒã‚¯ç”»é¢ï¼‰
============================ */
function updateClock() {
    const now = new Date();
    const format = loadClockFormat(); // "12" or "24"

    const date = now.toLocaleDateString("ja-JP", {
        month: "long",
        day: "numeric",
        weekday: "long"
    });

    let time;

    if (format === "12") {
        // â˜… AM/PM ã‚’ä»˜ã‘ãšã« 12æ™‚é–“è¡¨ç¤º
        time = now.toLocaleTimeString("ja-JP", {
            hour: "2-digit",
            minute: "2-digit"
        });

        // â˜… 24æ™‚é–“â†’12æ™‚é–“ã«å¤‰æ›ï¼ˆAM/PMãªã—ï¼‰
        let h = now.getHours();
        let m = now.getMinutes().toString().padStart(2, "0");

        h = h % 12;
        if (h === 0) h = 12;

        time = `${h}:${m}`;
    } else {
        // 24æ™‚é–“è¡¨ç¤º
        time = now.toLocaleTimeString("ja-JP", {
            hour: "2-digit",
            minute: "2-digit",
            hour12: false
        });
    }

    document.getElementById("lock-date").textContent = date;
    document.getElementById("lock-time").textContent = time;
}
/* ============================
   ãƒ­ãƒƒã‚¯è§£é™¤
============================ */
document.getElementById("lockscreen").addEventListener("click", () => {
    document.getElementById("lockscreen").style.display = "none";
    document.getElementById("homescreen").style.display = "block";
});

/* ============================
   ã‚¢ãƒ—ãƒªé–‹é–‰
============================ */
function openApp(id) {
    document.getElementById(id).style.display = "block";
if (id === "youtube") {
    window.open("https://newpro-3xg0.onrender.com/", "_blank");
    return;
}
}

function closeApp(id) {
    document.getElementById(id).style.display = "none";
}

/* ============================
   è¨­å®šã‚¢ãƒ—ãƒªï¼šãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ
============================ */
function openSettingsPage(page) {
    const content = document.getElementById("settings-content");

    if (page === "wallpaper") {
        content.innerHTML = `
            <h2>å£ç´™</h2>

            <div class="wallpaper-section-title">URL ã‹ã‚‰è¿½åŠ ï¼ˆæœ€å¤§5æšï¼‰</div>
            <input id="wallpaper-url-input" type="text" placeholder="ç”»åƒURLã‚’å…¥åŠ›"
                style="width:70%; padding:6px; border-radius:6px; border:1px solid #ccc;">
            <button onclick="addCustomWallpaper()"
                style="padding:6px 12px; margin-left:6px; border-radius:6px; background:#007aff; color:white; border:none;">
                è¿½åŠ 
            </button>

            <div class="wallpaper-section-title">ã‚«ã‚¹ã‚¿ãƒ å£ç´™</div>
            <div class="wallpaper-grid" id="custom-wallpaper-grid"></div>

            <div class="wallpaper-section-title">ãƒ­ãƒƒã‚¯ç”»é¢ï¼ˆæ—¢å®šï¼‰</div>
            <div class="wallpaper-grid">
                <div class="wallpaper-thumb"
                    style="background-image:url('https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg')"
                    onclick="setWallpaper('lockscreen', 'win11')">
                </div>
            </div>

            <div class="wallpaper-section-title">ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆæ—¢å®šï¼‰</div>
            <div class="wallpaper-grid">
                <div class="wallpaper-thumb"
                    style="background-image:url('https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg')"
                    onclick="setWallpaper('homescreen', 'divnil')">
                </div>
            </div>
        `;

        loadCustomWallpapers();
        highlightSelectedWallpapers();
        return;
    }

    if (page === "ura") {
    content.innerHTML = `
        <h2>è£ãƒ¢ãƒ¼ãƒ‰</h2>
        <p>ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>

        <input id="ura-pass" type="password" maxlength="12"
            style="padding:10px; font-size:18px; width:180px; text-align:center;">

        <button onclick="checkUraPass()"
            style="padding:8px 16px; margin-left:10px;">OK</button>

        <div id="ura-result" style="margin-top:10px; color:#888;"></div>

        <div id="ura-menu" style="display:none; margin-top:20px;">
            <h3>éš ã—ã‚¢ãƒ—ãƒª</h3>

            <button onclick="openUtopia()"
                style="padding:10px 16px; margin-right:10px;">utopia</button>

            <button onclick="openWakame()"
                style="padding:10px 16px;">wakame</button>
        </div>
    `;
    return;
}

    if (page === "system") {
    content.innerHTML = `
        <h2>ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</h2>

        <h3>æ™‚è¨ˆ</h3>
        <label>
            <input type="radio" name="clock-format" value="24" onchange="setClockFormat(24)">
            24æ™‚é–“è¡¨ç¤º
        </label><br>
        <label>
            <input type="radio" name="clock-format" value="12" onchange="setClockFormat(12)">
            12æ™‚é–“è¡¨ç¤º
        </label>

        <h3 style="margin-top:20px;">Dock</h3>
        <label>
            <input type="checkbox" id="dock-toggle" onchange="toggleDock()">
            Dock ã‚’è¡¨ç¤ºã™ã‚‹
        </label>

        <h3 style="margin-top:20px;">ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º</h3>
        <select onchange="changeIconSize(this.value)">
            <option value="small">å°</option>
            <option value="medium" selected>ä¸­</option>
            <option value="large">å¤§</option>
        </select>
    `;

    // ç¾åœ¨ã®è¨­å®šã‚’åæ˜ 
    loadSystemSettings();
    return;
}

    if (page === "info") {
    content.innerHTML = `
        <h2>æƒ…å ±</h2>

        <p>OS åï¼škumaOS</p>
        <p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼š1.0.0</p>
        <p>é–‹ç™ºè€…ï¼šhinata</p>

        <h3>ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±</h3>
        <p>ãƒ–ãƒ©ã‚¦ã‚¶ï¼š${navigator.userAgent}</p>
        <p>ç”»é¢ã‚µã‚¤ã‚ºï¼š${window.innerWidth} x ${window.innerHeight}</p>
    `;
    return;
}
}

    function checkUraPass() {
    const input = document.getElementById("ura-pass").value;
    const result = document.getElementById("ura-result");

    if (input === "jagdyufr5t62") {
        result.textContent = "èªè¨¼æˆåŠŸï¼è£ãƒ›ãƒ¼ãƒ ã¸ç§»å‹•ã—ã¾ã™ã€‚";

        // â˜… è¨­å®šã‚’é–‰ã˜ã¦è£ãƒ›ãƒ¼ãƒ ã¸ç§»å‹•
        unlockSecretMode();

    } else {
        result.textContent = "ãƒ‘ã‚¹ã‚³ãƒ¼ãƒ‰ãŒé•ã„ã¾ã™ã€‚";
    }
}
    function openWakame() {
    window.open("https://wkt-hcic.onrender.com/", "_blank");
}

function openUtopia() {
    window.open("https://utopia.nana.mr-moo.co.uk/", "_blank");
}
    function toggleDock() {
    const enabled = document.getElementById("dock-toggle").checked;
    localStorage.setItem("dock-enabled", enabled ? "1" : "0");

    const dock = document.getElementById("dock");
    if (dock) dock.style.display = enabled ? "flex" : "none";
}



/* ============================
   å£ç´™è¨­å®šï¼ˆæ—¢å®š + ã‚«ã‚¹ã‚¿ãƒ ï¼‰
============================ */
function setWallpaper(target, name) {

    // ã‚«ã‚¹ã‚¿ãƒ å£ç´™
    if (target === "custom") {
        let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");
        const url = list[name];
        if (!url) return;

        document.getElementById("homescreen").style.backgroundImage = `url('${url}')`;
        document.getElementById("lockscreen").style.backgroundImage = `url('${url}')`;

        localStorage.setItem("wallpaper-lock", "custom-" + name);
        localStorage.setItem("wallpaper-home", "custom-" + name);

        highlightSelectedWallpapers();
        return;
    }

    // æ—¢å®šãƒ­ãƒƒã‚¯ç”»é¢
    if (target === "lockscreen") {
        if (name === "win11") {
            document.getElementById("lockscreen").style.backgroundImage =
                "url('https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg')";
        }
        localStorage.setItem("wallpaper-lock", name);
    }

    // æ—¢å®šãƒ›ãƒ¼ãƒ ç”»é¢
    if (target === "homescreen") {
        if (name === "divnil") {
            document.getElementById("homescreen").style.backgroundImage =
                "url('https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg')";
        }
        localStorage.setItem("wallpaper-home", name);
    }

    highlightSelectedWallpapers();
}

/* ============================
   é¸æŠä¸­ã®å£ç´™ã«é’æ ã‚’ã¤ã‘ã‚‹
============================ */
function highlightSelectedWallpapers() {
    const lock = localStorage.getItem("wallpaper-lock");
    const home = localStorage.getItem("wallpaper-home");

    document.querySelectorAll(".wallpaper-thumb").forEach(el => {
        el.classList.remove("selected");
    });

    // æ—¢å®šãƒ­ãƒƒã‚¯
    if (lock === "win11") {
        const el = document.querySelector(".wallpaper-section-title:nth-of-type(3) + .wallpaper-grid .wallpaper-thumb");
        if (el) el.classList.add("selected");
    }

    // æ—¢å®šãƒ›ãƒ¼ãƒ 
    if (home === "divnil") {
        const el = document.querySelector(".wallpaper-section-title:nth-of-type(4) + .wallpaper-grid .wallpaper-thumb");
        if (el) el.classList.add("selected");
    }

    // ã‚«ã‚¹ã‚¿ãƒ 
    if (lock && lock.startsWith("custom-")) {
        const index = Number(lock.replace("custom-", ""));
        const grid = document.getElementById("custom-wallpaper-grid");
        if (grid && grid.children[index]) {
            grid.children[index].classList.add("selected");
        }
    }
}

/* ============================
   èµ·å‹•æ™‚ã«ä¿å­˜æ¸ˆã¿å£ç´™ã‚’åæ˜ 
============================ */
function applySavedWallpapers() {
    const lock = localStorage.getItem("wallpaper-lock");
    const home = localStorage.getItem("wallpaper-home");

    let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");

    // ã‚«ã‚¹ã‚¿ãƒ å£ç´™ï¼ˆãƒ­ãƒƒã‚¯ï¼‰
    if (lock && lock.startsWith("custom-")) {
        const index = Number(lock.replace("custom-", ""));
        const url = list[index];
        if (url) {
            document.getElementById("lockscreen").style.backgroundImage = `url('${url}')`;
        }
    }

    // ã‚«ã‚¹ã‚¿ãƒ å£ç´™ï¼ˆãƒ›ãƒ¼ãƒ ï¼‰
    if (home && home.startsWith("custom-")) {
        const index = Number(home.replace("custom-", ""));
        const url = list[index];
        if (url) {
            document.getElementById("homescreen").style.backgroundImage = `url('${url}')`;
        }
    }

    // æ—¢å®šãƒ­ãƒƒã‚¯
    if (lock === "win11") {
        document.getElementById("lockscreen").style.backgroundImage =
            "url('https://divnil.com/wallpaper/ipad/img/app/w/i/windows-11-4k-esthetics_bwpmz22umzqarawkpjrnzwltrwdlaw0_5bf46acd75aefa7fc84cf9d52c24ed42_raw.jpg')";
    }

    // æ—¢å®šãƒ›ãƒ¼ãƒ 
    if (home === "divnil") {
        document.getElementById("homescreen").style.backgroundImage =
            "url('https://divnil.com/wallpaper/ipad/img/app/c/r/crznzmd_30b46d7f08cf7d136441d6e467126325_raw.jpg')";
    }
}
function setClockFormat(type) {
    localStorage.setItem("clock-format", type);
    updateClock(); // å³æ™‚åæ˜ 
}

function loadClockFormat() {
    return localStorage.getItem("clock-format") || "24";
}

/* ============================
   ã‚«ã‚¹ã‚¿ãƒ å£ç´™ã‚’è¿½åŠ ï¼ˆæœ€å¤§5æšï¼‰
============================ */
function addCustomWallpaper() {
    const input = document.getElementById("wallpaper-url-input");
    if (!input) return;

    const url = input.value.trim();
    if (!url) return;

    let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");

    // â˜… æšæ•°åˆ¶é™ã‚’å‰Šé™¤ã—ãŸã®ã§ç„¡åˆ¶é™ã«è¿½åŠ ã§ãã‚‹
    list.push(url);

    localStorage.setItem("custom-wallpapers", JSON.stringify(list));

    loadCustomWallpapers();
    input.value = "";
}

/* ============================
   ã‚«ã‚¹ã‚¿ãƒ å£ç´™ä¸€è¦§ã‚’èª­ã¿è¾¼ã‚€
============================ */
function loadCustomWallpapers() {
    const grid = document.getElementById("custom-wallpaper-grid");
    if (!grid) return;

    grid.innerHTML = "";

    let list = JSON.parse(localStorage.getItem("custom-wallpapers") || "[]");

    list.forEach((url, index) => {
        const div = document.createElement("div");
        div.className = "wallpaper-thumb";
        div.style.backgroundImage = `url('${url}')`;
        div.onclick = () => setWallpaper("custom", index);
        grid.appendChild(div);
    });

    highlightSelectedWallpapers();
}

/* ============================
   èµ·å‹•æ™‚ã«å£ç´™ã‚’åæ˜ 
============================ */
window.addEventListener("load", applySavedWallpapers);
    function changeIconSize(size) {
    localStorage.setItem("icon-size", size);
    applyIconSize();
}

function applyIconSize() {
    const size = localStorage.getItem("icon-size") || "medium";
    const icons = document.querySelectorAll(".app-icon");

    icons.forEach(icon => {
        if (size === "small") {
            icon.style.width = "60px";
            icon.style.height = "60px";
            icon.style.fontSize = "20px";
        } else if (size === "large") {
            icon.style.width = "100px";
            icon.style.height = "100px";
            icon.style.fontSize = "32px";
        } else {
            icon.style.width = "80px";
            icon.style.height = "80px";
            icon.style.fontSize = "26px";
        }
    });
}
    function loadSystemSettings() {
    // æ™‚è¨ˆ
    const format = loadClockFormat();
    const radio = document.querySelector(`input[name="clock-format"][value="${format}"]`);
    if (radio) radio.checked = true;

    // Dock
    const dockEnabled = localStorage.getItem("dock-enabled") === "1";
    const dockToggle = document.getElementById("dock-toggle");
    if (dockToggle) dockToggle.checked = dockEnabled;

    // ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º
    applyIconSize();
}
    function loadClockFormat() {
    return localStorage.getItem("clock-format") || "24";
}

updateClock();
setInterval(updateClock, 1000);

</script>

</body>
</html>
